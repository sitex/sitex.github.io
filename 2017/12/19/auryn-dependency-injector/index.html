
<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">

    <title>Auryn Dependency Injector</title>
    <meta name="description" content="">

    <meta name="HandheldFriendly" content="True">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">

    <link rel="shortcut icon" href="../../../../favicon.ico">

    <link rel="stylesheet" type="text/css" href="https://fonts.googleapis.com/css?family=Merriweather:300,700,700italic,300italic%7COpen+Sans:700,400">
    <link rel="stylesheet" type="text/css" href="../../../../assets/css/screen.css?v=1779d4cf0c">


    <link rel="canonical" href="https://stefanscherer.github.io/2017/12/19/auryn-dependency-injector/">
    <meta name="referrer" content="no-referrer-when-downgrade">
    <link rel="amphtml" href="https://stefanscherer.github.io/2017/12/19/auryn-dependency-injector/amp/">
    
    <meta property="og:site_name" content="Amazing Technology">
    <meta property="og:type" content="article">
    <meta property="og:title" content="Auryn Dependency Injector">
    <meta property="og:description" content="A dependency injector resolves the dependencies of your class and makes sure that the correct objects are injected when the class is instantiated. Basic Instantiation If a class only asks for concrete dependencies you can use the Injector to inject them without specifying any injection definitions: class SomeDep {} class AnotherDep">
    <meta property="og:url" content="https://stefanscherer.github.io/2017/12/19/auryn-dependency-injector/">
    <meta property="article:published_time" content="2017-12-19T02:01:26.000Z">
    <meta property="article:modified_time" content="2017-12-19T02:01:26.000Z">
    <meta property="article:tag" content="php">
    <meta property="article:tag" content="tools">
    
    <meta name="twitter:card" content="summary">
    <meta name="twitter:title" content="Auryn Dependency Injector">
    <meta name="twitter:description" content="A dependency injector resolves the dependencies of your class and makes sure that the correct objects are injected when the class is instantiated. Basic Instantiation If a class only asks for concrete dependencies you can use the Injector to inject them without specifying any injection definitions: class SomeDep {} class AnotherDep">
    <meta name="twitter:url" content="https://stefanscherer.github.io/2017/12/19/auryn-dependency-injector/">
    <meta name="twitter:label1" content="Written by">
    <meta name="twitter:data1" content="Blogger">
    <meta name="twitter:label2" content="Filed under">
    <meta name="twitter:data2" content="php, tools">
    
    <script type="application/ld+json">
{
    "@context": "https://schema.org",
    "@type": "Article",
    "publisher": {
        "@type": "Organization",
        "name": "Amazing Technology",
        "logo": "https://stefanscherer.github.io/ghost/img/ghosticon.jpg"
    },
    "author": {
        "@type": "Person",
        "name": "Blogger",
        "image": {
            "@type": "ImageObject",
            "url": "//www.gravatar.com/avatar/51e23cf1e6b11e5cc63752a15f4e9c53?s=250&d=mm&r=x",
            "width": 250,
            "height": 250
        },
        "url": "https://stefanscherer.github.io/author/blogger/",
        "sameAs": []
    },
    "headline": "Auryn Dependency Injector",
    "url": "https://stefanscherer.github.io/2017/12/19/auryn-dependency-injector/",
    "datePublished": "2017-12-19T02:01:26.000Z",
    "dateModified": "2017-12-19T02:01:26.000Z",
    "keywords": "php, tools",
    "description": "A dependency injector resolves the dependencies of your class and makes sure that the correct objects are injected when the class is instantiated. Basic Instantiation If a class only asks for concrete dependencies you can use the Injector to inject them without specifying any injection definitions: class SomeDep {} class AnotherDep",
    "mainEntityOfPage": {
        "@type": "WebPage",
        "@id": "https://stefanscherer.github.io"
    }
}
    </script>

    <meta name="generator" content="Ghost 0.11">
    <link rel="alternate" type="application/rss+xml" title="Amazing Technology" href="https://stefanscherer.github.io/rss/">
</head>
<body class="post-template tag-php tag-tools nav-closed">

    <div class="nav">
    <h3 class="nav-title">Menu</h3>
    <a href="index.html#" class="nav-close">
        <span class="hidden">Close</span>
    </a>
    <ul>
            <li class="nav--"><a href="https://stefanscherer.github.io/">Фантастические технологии</a></li>
            <li class="nav--"><a href="https://stefanscherer.github.io/tag/tools/">Полезные инструменты</a></li>
            <li class="nav--"><a href="https://stefanscherer.github.io/tag/math/">Занимательная математика</a></li>
    </ul>
        <a class="subscribe-button icon-feed" href="https://stefanscherer.github.io/rss/">Subscribe</a>
</div>
<span class="nav-cover"></span>


    <div class="site-wrapper">

        


<header class="main-header post-head no-cover">
    <nav class="main-nav  clearfix">
        
            <a class="menu-button icon-menu" href="index.html#"><span class="word">Menu</span></a>
    </nav>
</header>

<main class="content" role="main">
    <article class="post tag-php tag-tools">

        <header class="post-header">
            <h1 class="post-title">Auryn Dependency Injector</h1>
            <section class="post-meta">
                <time class="post-date" datetime="2017-12-19">19 December 2017</time>  on <a href="../../../../tag/php/">php</a>, <a href="../../../../tag/tools/">tools</a>
            </section>
        </header>

        <section class="post-content">
            <p>A dependency injector resolves the dependencies of your class and makes sure that the correct objects are injected when the class is instantiated.</p>

<h3 id="basicinstantiation">Basic Instantiation</h3>

<p>If a class only asks for concrete dependencies you can use the Injector to inject them without specifying any injection definitions:</p>

<pre><code>class SomeDep {}

class AnotherDep {}

class MyClass {  
    public $dep1;
    public $dep2;
    public function __construct(SomeDep $dep1, AnotherDep $dep2) {
        $this-&gt;dep1 = $dep1;
        $this-&gt;dep2 = $dep2;
    }
}

$injector = new Auryn\Injector;
$myObj = $injector-&gt;make('MyClass');
</code></pre>

<p>In this scenario you can use the Injector to automatically provision <code>MyClass</code> with the required <code>SomeDependency</code> and <code>AnotherDependency</code> class instances.</p>

<h3 id="injectiondefinitions">Injection Definitions</h3>

<pre><code>interface Engine {}

class V8 implements Engine {}

class Car {  
    private $engine;
    public function __construct(Engine $engine) {
        $this-&gt;engine = $engine;
    }
}
//...

$injector-&gt;define('Car', ['engine' =&gt; 'V8']);
</code></pre>

<p>Because the <code>Car</code> constructor parameter we needed to define was named <code>$engine</code>, our definition specified an <code>engine</code> key whose value was the name of the class (<code>V8</code>) that we want to inject.</p>

<h4 id="nonclassparametersrawvalues">Non-Class Parameters (Raw values)</h4>

<pre><code>$injector-&gt;define(TemplateDirectory::class, [':rootDirectory' =&gt; ROOT_DIR]);
// Equals to:
$injector-&gt;define(TemplateDirectory::class, [ROOT_DIR]);
</code></pre>

<p>The colon character preceding the parameter names tells the Injector that the associated values ARE NOT class names. If the colons had been omitted above, auryn would attempt to instantiate classes of the names specified in the string and an exception would result.</p>

<h3 id="alias">Alias</h3>

<pre><code>$injector-&gt;alias('Engine', 'V8');
</code></pre>

<h3 id="share">Share</h3>

<p>By sharing an instance of a class, Auryn\Injector will always use that instance when provisioning classes that type-hint the shared class.  </p>

<pre><code>class Person {  
    public $name = 'John Snow';
}

$injector = new Auryn\Injector;
$injector-&gt;share('Person');

$person = $injector-&gt;make('Person');
var_dump($person-&gt;name); // John Snow

$person-&gt;name = 'Arya Stark';

$anotherPerson = $injector-&gt;make('Person');
var_dump($anotherPerson-&gt;name); // Arya Stark  
var_dump($person === $anotherPerson); // bool(true) because it's the same instance!  
</code></pre>

<blockquote>
  <p><strong>NOTE:</strong> Once the Injector caches a shared instance, call-time definitions passed to <code>Auryn\Injector::make</code> will have no effect. Once shared, an instance will always be returned for instantiations of its type until the object is un-shared or refreshed:</p>
</blockquote>

<h3 id="instantiationdelegates">Instantiation Delegates</h3>

<p>Often factory classes/methods are used to prepare an object for use after instantiation. auryn allows you to integrate factories and builders directly into the injection process by specifying callable instantiation delegates on a per-class basis.  </p>

<pre><code>$TwigTemplateRendererFactory = function () use ($injector) {
    $factory = $injector-&gt;make(TwigTemplateRendererFactory::class);
    return $factory-&gt;create();
};

$injector-&gt;delegate(
    TemplateRenderer::class,
    $TwigTemplateRendererFactory
);
</code></pre>

<p><a href="https://github.com/rdlowrey/auryn">https://github.com/rdlowrey/auryn</a></p>
        </section>

        <footer class="post-footer">


            <figure class="author-image">
                <a class="img" href="../../../../author/blogger/" style="background-image: url(http://www.gravatar.com/avatar/51e23cf1e6b11e5cc63752a15f4e9c53?s&amp;)"><span class="hidden">Blogger's Picture</span></a>
            </figure>

            <section class="author">
                <h4><a href="../../../../author/blogger/">Blogger</a></h4>

                    <p>Read <a href="../../../../author/blogger/">more posts</a> by this author.</p>
                <div class="author-meta">
                    
                    
                </div>
            </section>


            <section class="share">
                <h4>Share this post</h4>
                <a class="icon-twitter" href="https://twitter.com/intent/tweet?text=Auryn%20Dependency%20Injector&amp;url=https://stefanscherer.github.io/2017/12/19/auryn-dependency-injector/" onclick="window.open(this.href, 'twitter-share', 'width=550,height=235');return false;">
                    <span class="hidden">Twitter</span>
                </a>
                <a class="icon-facebook" href="https://www.facebook.com/sharer/sharer.php?u=https://stefanscherer.github.io/2017/12/19/auryn-dependency-injector/" onclick="window.open(this.href, 'facebook-share','width=580,height=296');return false;">
                    <span class="hidden">Facebook</span>
                </a>
                <a class="icon-google-plus" href="https://plus.google.com/share?url=https://stefanscherer.github.io/2017/12/19/auryn-dependency-injector/" onclick="window.open(this.href, 'google-plus-share', 'width=490,height=530');return false;">
                    <span class="hidden">Google+</span>
                </a>
            </section>


        </footer>

    </article>
</main>

<aside class="read-next">
    <a class="read-next-story no-cover" href="../../24/php-7-2-for-ubuntu/">
        <section class="post">
            <h2>PHP 7.2 for Ubuntu</h2>
            <p>1. Add PPA ondrej/php sudo add-apt-repository ppa:ondrej/php   sudo apt update   2. Current PHP packages dpkg -l…</p>
        </section>
    </a>
    <a class="read-next-story prev no-cover" href="../../10/virtualenv/">
        <section class="post">
            <h2>virtualenv</h2>
            <p>virtualenv lets you create virtual Python environments. Everything you install or remove in that environment stays there and other…</p>
        </section>
    </a>
</aside>



        <footer class="site-footer clearfix">
            <section class="copyright"><a href="https://stefanscherer.github.io">Amazing Technology</a> © 2018</section>
            <section class="poweredby">Proudly published with <a href="https://ghost.org">Ghost</a></section>
        </footer>

    </div>

    <script type="text/javascript" src="http://code.jquery.com/jquery-1.12.0.min.js"></script>
    
    <script type="text/javascript" src="../../../../assets/js/jquery.fitvids.js?v=1779d4cf0c"></script>
    <script type="text/javascript" src="../../../../assets/js/index.js?v=1779d4cf0c"></script>

</body>
